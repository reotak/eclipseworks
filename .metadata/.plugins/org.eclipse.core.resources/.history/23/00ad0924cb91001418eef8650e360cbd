package ex16_03;

import java.lang.reflect.Member;

class ClassContents {
	public static void main(String[] args) {
		try {
			Class<?> c = Class.forName(args[0]);
			System.out.println(c);

			Class<?> sc = c.getSuperclass();
			printMembers(sc.getFields());
			printMembers(sc.getConstructors());
			printMembers(sc.getMethods());

		} catch (ClassNotFoundException e) {
			System.out.println("unknown class: " + args[0]);
		}
	}

	private static void printMembers(Member[] mems) {
		for (Member m : mems) {
			if (m.getDeclaringClass() == Object.class) {
				continue;
			}
			String decl = m.toString();
			System.out.print(" ");
			System.out.println(strip(decl, "java.lang."));

		}
	}

	public static String strip(String str, final String stripChars) {
		String result = "";
		for (int i = 0; i < str.length(); i++) {

			boolean isMatch = true;
			for (int j = 0; j < stripChars.length(); j++) {
				if (i + j < str.length()) {
					if (str.charAt(i + j) != stripChars.charAt(j)) {
						isMatch = false;
						break;
					}
				}
			}

			if (isMatch) {
				i += stripChars.length() - 1;
			} else {
				result += str.charAt(i);
			}
		}

		return result;
	}

}
