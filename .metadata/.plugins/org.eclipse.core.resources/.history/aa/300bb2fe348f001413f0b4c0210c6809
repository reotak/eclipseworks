package ex14_03;

class SafetyAdderRunner implements Runnable {
	final SafetyAdder adder;
	boolean isRan = false;

	public SafetyAdderRunner(MyNumber num) {
		adder = new SafetyAdder(num);
	}

	public void run() {
		if (isRan == false) {
			adder.add(10000000);
			isRan = true;
		}
	}

	public boolean getIsRan() {
		return isRan;
	}

	public static void main(String []args) {
		MyNumber num = new MyNumber(0);
		SafetyAdderRunner runner1 = new SafetyAdderRunner(num);
		SafetyAdderRunner runner2 = new SafetyAdderRunner(num);

		Thread thread1 = new Thread(runner1, "runnder1");
		Thread thread2 = new Thread(runner2, "runnder2");

		thread1.start();
		thread2.start();

		while (!(runner1.getIsRan() && runner2.getIsRan()));

		System.out.println(num.getNum());
	}
}
