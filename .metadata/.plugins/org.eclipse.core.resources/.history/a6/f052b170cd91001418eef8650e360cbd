package ex16_03;

import java.lang.reflect.Member;
import java.util.ArrayList;
import java.util.List;

class ClassContents {
	public static void main(String[] args) {
		try {
			Class<?> c = Class.forName(args[0]);

			printMembers(c);

		} catch (ClassNotFoundException e) {
			System.out.println("unknown class: " + args[0]);
		}
	}

	private static void printMembers(Class<?> c) {
		Class<?> sc = c.getSuperclass();

		System.out.println("SuperClass: " + sc.toString());
		Member[] scFields =sc.getFields();
		printMembers(scFields);
		Member[] scConstructors = sc.getConstructors();
		printMembers(scConstructors);
		Member[] scMethods = sc.getMethods();
		printMembers(scMethods);

		System.out.println(c);
		List<Member> methods = new ArrayList<Member>(c.getMethods());
		printMembers(methods);
	}

	private static List<Member> arrayToList(Member[] members) {
		List<Member> list = new ArrayList<Member>();
		for (Member m : members) {
			list.add(m);
		}

		return list;
	}

	private static void printMembers(List<Member> mems) {
		for (Member m : mems) {
			if (m.getDeclaringClass() == Object.class) {
				continue;
			}
			String decl = m.toString();
			System.out.print("  ");
			System.out.println(strip(decl, "java.lang."));

		}
	}

	public static String strip(String str, final String stripChars) {
		String result = "";
		for (int i = 0; i < str.length(); i++) {

			boolean isMatch = true;
			for (int j = 0; j < stripChars.length(); j++) {
				if (i + j < str.length()) {
					if (str.charAt(i + j) != stripChars.charAt(j)) {
						isMatch = false;
						break;
					}
				} else {
					isMatch = false;
					break;
				}
			}

			if (isMatch) {
				i += stripChars.length() - 1;
			} else {
				result += str.charAt(i);
			}
		}

		return result;
	}

}
